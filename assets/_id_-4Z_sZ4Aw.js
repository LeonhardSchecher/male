import{f as I}from"./playersApiWrapper-BEL5VTNC.js";import{_ as V,o as u,a as y,w as l,b as t,h as v,i as g,d as _,j as d,k as x,e as s,t as r,g as o,l as N,f as k,c as h,V as b}from"./index-C7sX5Ufk.js";import{V as S}from"./VSelect-CQXedZJ2.js";import{V as T,a as j}from"./VDialog-BtRPDKOR.js";import{V as n,a as m,b as B,c as f,d as M}from"./VCard-zJvUFEqC.js";import{a as E}from"./clubsApiWrapper-B4BIN4ca.js";import"./dateFormatter-CPnMq9Ic.js";const K={data(){return{headers:[{title:"Nimi",value:"name",sortable:!0},{title:"Reiting",value:"ranking",sortable:!0},{value:"action",sortable:!1}],players:[],searchName:"",showDialog:!1,selectedPlayer:null}},props:{clubId:{type:String,required:!0}},created(){this.$watch(()=>this.$route.params.id,this.fetchPlayersData,{immediate:!0})},methods:{async fetchPlayersData(){this.players=await I(this.clubId)},openPlayerDialog(c){this.selectedPlayer=c,this.showDialog=!0},closePlayerDialog(){this.showDialog=!1,this.selectedPlayer=null}}};function R(c,e,D,P,a,p){return u(),y(k,{fluid:"",class:"mt-4"},{default:l(()=>[t(T,{headers:a.headers,items:a.players,search:a.searchName,"no-data-text":"Mängijaid ei leitud","item-key":"id",class:"elevation-1"},{top:l(()=>[t(v,{flat:"",dense:"",color:"secondary"},{default:l(()=>[t(g),t(S,{modelValue:a.searchName,"onUpdate:modelValue":e[0]||(e[0]=i=>a.searchName=i),label:"Otsi mängijat nime järgi",clearable:"",dense:"",outlined:"","hide-details":"",style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1})]),"item.action":l(({item:i})=>[t(_,{align:"center",justify:"end"},{default:l(()=>[t(d,{color:"secondary",onClick:x(w=>p.openPlayerDialog(i),["stop"])},{default:l(()=>e[3]||(e[3]=[s(" Detailid ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["headers","items","search"]),t(j,{modelValue:a.showDialog,"onUpdate:modelValue":e[2]||(e[2]=i=>a.showDialog=i),"max-width":"600"},{default:l(()=>[a.selectedPlayer?(u(),y(n,{key:0},{default:l(()=>[t(m,null,{default:l(()=>[s(r(a.selectedPlayer.name),1)]),_:1}),t(B,null,{default:l(()=>[s(r(a.selectedPlayer.ranking),1)]),_:1}),t(f,null,{default:l(()=>[s(" Sugu: "+r(a.selectedPlayer.gender)+" ",1),e[5]||(e[5]=o("br",null,null,-1)),s(" Sünniaeg: "+r(a.selectedPlayer.dateOfBirth)+" ",1),e[6]||(e[6]=o("br",null,null,-1)),t(d,{color:"primary",class:"player-page-button",onClick:e[1]||(e[1]=i=>this.$router.push(`/mangijad/${a.selectedPlayer.id}`))},{default:l(()=>e[4]||(e[4]=[s(" Mängija lehele ")])),_:1})]),_:1}),t(M,null,{default:l(()=>[t(g),t(d,{color:"dark",onClick:p.closePlayerDialog},{default:l(()=>e[7]||(e[7]=[s(" Sulge ")])),_:1},8,["onClick"])]),_:1})]),_:1})):N("",!0)]),_:1},8,["modelValue"])]),_:1})}const C=V(K,[["render",R],["__scopeId","data-v-a4aca5bc"]]),A={name:"ClubDetailsPage",components:{PlayersSearchTable:C},data(){return{club:null,clubId:null}},created(){this.clubId=this.$route.params.id,this.$watch(()=>this.$route.params.id,this.fetchClubData,{immediate:!0})},methods:{async fetchClubData(){this.club=await E(this.clubId)}}},O={key:0},U={class:"club-title"},G={key:1};function q(c,e,D,P,a,p){const i=C;return u(),y(k,null,{default:l(()=>[a.club?(u(),h("div",O,[o("h1",U,r(a.club.name),1),t(_,{dense:""},{default:l(()=>[t(b,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(n,{outlined:""},{default:l(()=>[t(m,null,{default:l(()=>[s(r(a.club.location),1)]),_:1}),t(f,null,{default:l(()=>e[1]||(e[1]=[s(" ASUKOHT ")])),_:1})]),_:1})]),_:1}),t(b,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(n,{outlined:""},{default:l(()=>[t(m,null,{default:l(()=>[s(r(a.club.membersCount),1)]),_:1}),t(f,null,{default:l(()=>e[2]||(e[2]=[s(" MÄNGIJAID ")])),_:1})]),_:1})]),_:1}),t(b,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(n,{outlined:""},{default:l(()=>[t(m,null,{default:l(()=>[s(r(a.club.averageRating),1)]),_:1}),t(f,null,{default:l(()=>e[3]||(e[3]=[s(" KESKMINE REITING ")])),_:1})]),_:1})]),_:1})]),_:1}),e[4]||(e[4]=o("h2",{class:"players-section"},"Mängijad:",-1)),t(i,{"club-id":a.clubId},null,8,["club-id"])])):(u(),h("div",G,[e[6]||(e[6]=o("h2",null,"Klubi ei leitud",-1)),e[7]||(e[7]=o("p",null,"Vabandame, antud klubi ei eksisteeri või on andmed puudulikud.",-1)),t(d,{color:"primary",onClick:e[0]||(e[0]=w=>this.$router.push("/klubid"))},{default:l(()=>e[5]||(e[5]=[s(" Tagasi klubide lehele ")])),_:1})]))]),_:1})}const X=V(A,[["render",q],["__scopeId","data-v-6860d5a6"]]);export{X as default};

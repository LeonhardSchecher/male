import{f}from"./dateFormatter-CPnMq9Ic.js";import{e as T,V as y,a as C,b as N,c as v,d as x}from"./VCard-B39ZIvK2.js";import{_ as b,o as i,a as d,w as l,b as s,h as I,p as B,e as n,i as p,d as c,j as _,k as S,g as m,t as o,l as h,f as k,V,c as g}from"./index-CkYV15g4.js";import{V as j}from"./VSelect-BfsO_7mQ.js";import{V as A,a as E}from"./VDialog-BjiPJtFi.js";import{a as P}from"./tournamentsApiWrapper-B0x7_ZPd.js";async function L(t){try{const e=await T.get(`/matches/${t}`);return U(e.data)}catch(e){console.error("Error fetching matches",e)}}function U(t){return t.map(e=>q(e))}function q(t){return{id:t.id,white:{id:t.valge_id,fullName:t.valge_perenimi+", "+t.valge_eesnimi,club:t.valge_klubi},black:{id:t.musti_id,fullName:t.must_perenimi+", "+t.must_eesnimi,club:t.must_klubi},startTime:f(t.algushetk),endTime:f(t.lopphetk),isEnded:Date.parse(t.lopphetk)<Date.now()}}const F={data(){return{headers:[{title:"Valge",value:"white.fullName",sortable:!0},{title:"Must",value:"black.fullName",sortable:!0},{title:"Algus",value:"startTime",sortable:!0},{title:"L천pp",value:"endTime",sortable:!0},{title:"L천ppenud",value:"isEnded",sortable:!0},{value:"action",sortable:!1}],matches:[],searchName:"",showDialog:!1,selectedMatch:null}},props:{tournamentId:{type:String,required:!0}},created(){this.$watch(()=>this.$route.params.id,this.fetchAllMatchesData,{immediate:!0})},methods:{async fetchAllMatchesData(){this.matches=await L(this.tournamentId)},openMatchDialog(t){this.selectedMatch=t,this.showDialog=!0},closeMatchDialog(){this.showDialog=!1,this.selectedMatch=null}}};function O(t,e,w,D,a,u){return i(),d(k,{fluid:"",class:"mt-4"},{default:l(()=>[s(A,{headers:a.headers,items:a.matches,search:a.searchName,"no-data-text":"Partiisid ei leitud","item-key":"id",class:"elevation-1"},{top:l(()=>[s(I,{flat:"",dense:"",color:"secondary"},{default:l(()=>[s(B,null,{default:l(()=>e[2]||(e[2]=[n("Partiid")])),_:1}),s(p),s(j,{modelValue:a.searchName,"onUpdate:modelValue":e[0]||(e[0]=r=>a.searchName=r),label:"Otsi m채ngija nime j채rgi",clearable:"",dense:"",outlined:"","hide-details":"",style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1})]),"item.action":l(({item:r})=>[s(c,{align:"center",justify:"end"},{default:l(()=>[s(_,{color:"secondary",onClick:S(J=>u.openMatchDialog(r),["stop"])},{default:l(()=>e[3]||(e[3]=[n(" Detailid ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["headers","items","search"]),s(E,{modelValue:a.showDialog,"onUpdate:modelValue":e[1]||(e[1]=r=>a.showDialog=r),"max-width":"600"},{default:l(()=>[a.selectedMatch?(i(),d(y,{key:0},{default:l(()=>[s(C,null,{default:l(()=>[m("strong",null,o(a.selectedMatch.white.fullName),1),e[4]||(e[4]=n(" vs ")),m("strong",null,o(a.selectedMatch.black.fullName),1)]),_:1}),s(N,null,{default:l(()=>[n(o(a.selectedMatch.white.club)+" | "+o(a.selectedMatch.black.club),1)]),_:1}),s(v,null,{default:l(()=>[n(o(a.selectedMatch.description),1)]),_:1}),s(x,null,{default:l(()=>[s(p),s(_,{color:"dark",text:"",onClick:u.closeMatchDialog},{default:l(()=>e[5]||(e[5]=[n(" Sulge ")])),_:1},8,["onClick"])]),_:1})]),_:1})):h("",!0)]),_:1},8,["modelValue"])]),_:1})}const M=b(F,[["render",O]]),R={components:{MatchesSearch:M},data(){return{tournamentId:null,tournament:null}},created(){this.tournamentId=this.$route.params.id,this.$watch(()=>this.$route.params.id,this.fetchTournament,{immediate:!0})},methods:{async fetchTournament(){this.tournament=await P(this.tournamentId)}}},z={key:0,class:"mb-2"},G={key:1};function H(t,e,w,D,a,u){const r=M;return i(),d(k,{fluid:""},{default:l(()=>[s(c,{class:"mb-4"},{default:l(()=>[s(V,null,{default:l(()=>[a.tournament?(i(),g("h1",z,o(a.tournament.name),1)):h("",!0),a.tournament?(i(),g("h3",G,o(a.tournament.location),1)):h("",!0)]),_:1})]),_:1}),s(c,null,{default:l(()=>[s(V,null,{default:l(()=>[e[0]||(e[0]=m("h2",{class:"mb-4"},"Turniiri Partiid",-1)),s(r,{tournamentId:a.tournamentId},null,8,["tournamentId"])]),_:1})]),_:1})]),_:1})}const $=b(R,[["render",H]]);export{$ as default};

import{a as V}from"./playersApiWrapper-Bj4eDXKi.js";import{_ as P,a as h,w as t,f as x,o as d,b as e,V as o,d as m,c as C,r as y,F as k,g as f,t as u,e as g}from"./index-D8rOt4Tv.js";import{V as b,a as p,b as _}from"./VSelect-CCLZwV5m.js";import{V as w,a as N,b as B,c as F}from"./VCard--GxEfev3.js";import"./dateFormatter-CPnMq9Ic.js";const T={data(){return{players:[],searchName:"",resultsPerPage:5,sortBy:"Reiting",page:1}},created(){this.$watch(()=>this.$route.params.id,this.fetchAllPlayersData,{immediate:!0})},methods:{async fetchAllPlayersData(){this.players=await V()},goToPlayerDetails(r){this.$router.push(`/mangijad/${r}`)}},computed:{filteredPlayers(){let r=this.players.filter(i=>i.name.toLowerCase().includes(this.searchName.toLowerCase()));switch(this.sortBy){case"Nimi":r.sort((i,s)=>i.name.localeCompare(s.name));break;case"Reiting":r.sort((i,s)=>s.ranking-i.ranking);break}const l=(this.page-1)*this.resultsPerPage,c=l+this.resultsPerPage;return r.slice(l,c)},totalFiltered(){return this.players.filter(r=>r.name.toLowerCase().includes(this.searchName.toLowerCase())).length},pageCount(){return Math.ceil(this.totalFiltered/this.resultsPerPage)},startIndex(){return(this.page-1)*this.resultsPerPage+1},endIndex(){const r=this.page*this.resultsPerPage;return r>this.totalFiltered?this.totalFiltered:r}},watch:{sortBy(){this.page=1},resultsPerPage(){this.page=1}}};function I(r,l,c,i,s,n){return d(),h(x,{fluid:"",class:"mt-4"},{default:t(()=>[e(m,{class:"mb-4"},{default:t(()=>[e(o,{cols:"12",sm:"4"},{default:t(()=>[e(b,{modelValue:s.searchName,"onUpdate:modelValue":l[0]||(l[0]=a=>s.searchName=a),label:"Otsi nime järgi",clearable:""},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",sm:"4"},{default:t(()=>[e(p,{modelValue:s.resultsPerPage,"onUpdate:modelValue":l[1]||(l[1]=a=>s.resultsPerPage=a),items:[5,10,20,50],label:"Tulemusi lehel","menu-props":{maxHeight:200}},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",sm:"4"},{default:t(()=>[e(p,{modelValue:s.sortBy,"onUpdate:modelValue":l[2]||(l[2]=a=>s.sortBy=a),items:["Reiting","Nimi"],label:"Järjesta"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[(d(!0),C(k,null,y(n.filteredPlayers,a=>(d(),h(w,{key:a.id,class:"mb-4",outlined:"",hover:"",onClick:D=>n.goToPlayerDetails(a.id)},{default:t(()=>[e(N,null,{default:t(()=>[g(u(a.name),1)]),_:2},1024),e(B,null,{default:t(()=>[g(u(a.club),1)]),_:2},1024),e(F,null,{default:t(()=>[l[4]||(l[4]=f("strong",null,"Reiting:",-1)),g(" "+u(a.ranking),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,{cols:"6"},{default:t(()=>[e(_,{modelValue:s.page,"onUpdate:modelValue":l[3]||(l[3]=a=>s.page=a),length:n.pageCount},null,8,["modelValue","length"])]),_:1}),e(o,{cols:"6",class:"text-right"},{default:t(()=>[f("span",null," Näitan tulemusi "+u(n.startIndex)+"–"+u(n.endIndex)+" (kokku "+u(n.totalFiltered)+") ",1)]),_:1})]),_:1})]),_:1})}const S=P(T,[["render",I]]);export{S as default};

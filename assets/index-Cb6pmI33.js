import{f as b}from"./clubsApiWrapper-BSEi54-D.js";import{_ as p,a as h,o as m,w as a,b as e,V as o,d as g,c as C,r as P,F as k,e as d,t as n,f as x,g as f}from"./index-L4n5l3BN.js";import{V as _,a as V,b as w}from"./VSelect-CdGi7RLT.js";import{V as N,a as B,b as y,c as F}from"./VCard-CQXs_DKf.js";const L={name:"ClubsPage",data(){return{searchName:"",resultsPerPage:10,sortBy:"Reiting",page:1,clubs:[]}},computed:{filteredClubs(){let r=this.clubs.filter(i=>i.name.toLowerCase().includes(this.searchName.toLowerCase()));switch(this.sortBy){case"Nimi":r.sort((i,l)=>i.name.localeCompare(l.name));break;case"Reiting":r.sort((i,l)=>l.rating-i.rating);break;case"Liikmete arv":r.sort((i,l)=>l.members-i.members);break}const t=(this.page-1)*this.resultsPerPage,c=t+this.resultsPerPage;return r.slice(t,c)},totalFiltered(){return this.clubs.filter(r=>r.name.toLowerCase().includes(this.searchName.toLowerCase())).length},pageCount(){return Math.ceil(this.totalFiltered/this.resultsPerPage)},totalClubs(){return this.totalFiltered},startIndex(){return(this.page-1)*this.resultsPerPage+1},endIndex(){const r=this.page*this.resultsPerPage;return r>this.totalFiltered?this.totalFiltered:r}},created(){this.$watch(()=>this.$route.params.id,this.fetchAllClubsData,{immediate:!0})},watch:{sortBy(){this.page=1},resultsPerPage(){this.page=1}},methods:{async fetchAllClubsData(){this.clubs=await b()},goToClubDetails(r){this.$router.push(`/klubid/${r}`)}}};function I(r,t,c,i,l,u){return m(),h(x,{fluid:"",class:"mt-4"},{default:a(()=>[e(g,{class:"mb-4"},{default:a(()=>[e(o,{cols:"12",sm:"4"},{default:a(()=>[e(_,{modelValue:l.searchName,"onUpdate:modelValue":t[0]||(t[0]=s=>l.searchName=s),label:"Otsi nime järgi",clearable:""},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",sm:"4"},{default:a(()=>[e(V,{modelValue:l.resultsPerPage,"onUpdate:modelValue":t[1]||(t[1]=s=>l.resultsPerPage=s),items:[10,20,50],label:"Tulemusi lehel","menu-props":{maxHeight:200}},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",sm:"4"},{default:a(()=>[e(V,{modelValue:l.sortBy,"onUpdate:modelValue":t[2]||(t[2]=s=>l.sortBy=s),items:["Reiting","Nimi","Liikmete arv"],label:"Järjesta"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[(m(!0),C(k,null,P(u.filteredClubs,s=>(m(),h(o,{key:s.id,cols:"12",sm:"6",md:"4"},{default:a(()=>[e(N,{outlined:"",hover:"",class:"mb-4",onClick:T=>u.goToClubDetails(s.id)},{default:a(()=>[e(B,null,{default:a(()=>[d(n(s.name),1)]),_:2},1024),e(y,null,{default:a(()=>[t[4]||(t[4]=f("strong",null,"Keskmine reiting:",-1)),d(" "+n(s.averageRating)+" | ",1),t[5]||(t[5]=f("strong",null,"Liikmeid:",-1)),d(" "+n(s.membersCount),1)]),_:2},1024),e(F)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),e(g,null,{default:a(()=>[e(o,{cols:"6"},{default:a(()=>[e(w,{modelValue:l.page,"onUpdate:modelValue":t[3]||(t[3]=s=>l.page=s),length:u.pageCount},null,8,["modelValue","length"])]),_:1}),e(o,{cols:"6",class:"text-right"},{default:a(()=>[d(" Näitan tulemusi "+n(u.startIndex)+"–"+n(u.endIndex)+" (kokku "+n(u.totalClubs)+") ",1)]),_:1})]),_:1})]),_:1})}const A=p(L,[["render",I],["__scopeId","data-v-4a4c43cd"]]);export{A as default};
